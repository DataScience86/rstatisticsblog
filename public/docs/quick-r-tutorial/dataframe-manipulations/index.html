<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Data Manipulation Tasks With Example Code As a data analyst, you will be working mostly with data frames. And thus, it becomes vital that you learn, understand, and practice data manipulation tasks. This chapter will focus on listing down some of the most common data manipulation tasks along with example code.
Before, we start and dig into how to accomplish tasks mentioned above. Let&rsquo;s see how to access the datasets which come along with the R packages."><meta property="og:title" content="Dataframe Manipulations" />
<meta property="og:description" content="Data Manipulation Tasks With Example Code As a data analyst, you will be working mostly with data frames. And thus, it becomes vital that you learn, understand, and practice data manipulation tasks. This chapter will focus on listing down some of the most common data manipulation tasks along with example code.
Before, we start and dig into how to accomplish tasks mentioned above. Let&rsquo;s see how to access the datasets which come along with the R packages." />
<meta property="og:type" content="article" />
<meta property="og:url" content="//localhost:1313/docs/quick-r-tutorial/dataframe-manipulations/" />
<meta property="article:published_time" content="2019-10-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-05-02T18:02:54+05:30" />
<title>Dataframe Manipulations | R Statistics Blog</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.6df681b0bb21155cba49f6078e3559216772d8e03e780d240c73ea21817ed5e5.css" integrity="sha256-bfaBsLshFVy6SfYHjjVZIWdy2OA&#43;eA0kDHPqIYF&#43;1eU=">
<script defer src="/en.search.min.3d31721074493fbbf8ff42f1f894737445228593053b61f4321aa50a482e49d6.js" integrity="sha256-PTFyEHRJP7v4/0Lx&#43;JRzdEUihZMFO2H0MhqlCkguSdY="></script>

<script defer src="/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js" integrity="sha256-dKi7B/C&#43;6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-131766057-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="//localhost:1313/"><span>R Statistics Blog</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        
      </a>
  </li>
  
</ul>







  



  
  
  
  

  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
    <a href="/docs/subscribe/" class="">Subscribe</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Quick R Tutorial</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/quick-r-tutorial/introduction-to-r/" class="">Getting Started With R</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/quick-r-tutorial/r-basics/" class="">R Basics</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/quick-r-tutorial/using-conditional-statements-and-loops/" class="">Conditions &amp; Loops</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/quick-r-tutorial/functions-and-apply-family/" class="">Its All About Functions</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/quick-r-tutorial/dataframe-manipulations/" class="active">Dataframe Manipulations</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Useful R Packages</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/useful-r-packages/ggplot2-tutorial/" class="">ggplot2</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/useful-r-packages/datatable-tutorial-data-manipulation/" class="">data.table</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/useful-r-packages/Leaftlet-Package-for-Maps/" class="">Leaftlet</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Pre Processing Tasks</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Identifying-Outliers/" class="">Analysing Outliers</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Missing-Value-Imputation/" class="">Missing Value Imputation</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Summarizing-Data/" class="">Summarizing Data</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Hypothesis-Testing/" class="">Hypothesis Testing</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Correlation/" class="">Correlation</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Analysing-zero-variance-predictor/" class="">Analysing zero variance predictor</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Standardization-MinMax-Scaling/" class="">Standardization And Scaling</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Principal-Component-Analysis/" class="">Principal Component Analysis</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/pre-processing-tasks/Splitting-Data/" class="">Splitting Data</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Foundational Algorithms</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/foundational-algorithms/Linear-Regression/" class="">Linear Regression</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/foundational-algorithms/Ridge-Regression/" class="">Ridge Regression</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/foundational-algorithms/Lasso-Regression/" class="">Lasso Regression</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/foundational-algorithms/Binary-Logistics-Regression/" class="">Binary Logistic Regression</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/foundational-algorithms/Multinomial-Logistic-Regressions/" class="">Multinomial Logistic Regression</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/foundational-algorithms/k-means-clustering/" class="">k-Mean Clustering</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Text Mining</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/text-mining/text-pre-processing/" class="">Text Pre-Processing</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/text-mining/sentiment-analysis/" class="">Sentiment Analysis</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/text-mining/topic-modeling-lda/" class="">Topic Modeling</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  











  
<ul>
  
  <li>
    <a href="/posts/" >
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/DataScience86/rstatisticsblog/tree/master/content" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Dataframe Manipulations</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#data-manipulation-tasks-with-example-code">Data Manipulation Tasks With Example Code</a></li>
    <li><a href="#structure-of-a-data-frame">Structure of a data frame</a>
      <ul>
        <li><a href="#getting-column-and-row-names">Getting column and row names</a></li>
      </ul>
    </li>
    <li><a href="#converting-row-names-to-columns">Converting row names to columns</a></li>
    <li><a href="#accessing-columns-and-rows-in-a-data-frame">Accessing columns and rows in a data frame</a></li>
    <li><a href="#renaming-and-rearranging-columns-of-a-data-frame">Renaming and rearranging columns of a data frame</a></li>
    <li><a href="#how-to-identify-missing-values">How to identify missing values</a></li>
    <li><a href="#how-to-filtering-missing-values">How to filtering missing values</a></li>
    <li><a href="#how-to-impute-missing-values">How to impute missing values</a></li>
    <li><a href="#sorting-variables-in-a-data-frame">Sorting variables in a data frame</a></li>
    <li><a href="#removing-duplicated-values-from-a-data-frame">Removing duplicated values from a data frame</a></li>
    <li><a href="#renaming-levels-of-a-factor-variable-in-a-data-frame">Renaming levels of a factor variable in a data frame</a></li>
    <li><a href="#generating-frequency-tableone-way-two-way-etc">Generating frequency table(one-way, two-way etc)</a></li>
    <li><a href="#adding-and-deleting-columns-in-a-data-frame">Adding and deleting columns in a data frame</a></li>
    <li><a href="#merging-combining-and-appending-data-frames">Merging, combining and appending data frames</a></li>
    <li><a href="#summarizing-data">Summarizing data</a></li>
    <li><a href="#summarizing-data-by-grouped-variable">Summarizing data by grouped variable</a></li>
    <li><a href="#transforming-data-between-long-and-wide-format">Transforming data between long and wide format</a>
      <ul>
        <li><a href="#using-gather-function-from-tidyr-package-to-convert-the-data-from-wide-to-long-format">Using gather() function from tidyr package to convert the data from wide to long format.</a></li>
        <li><a href="#using-spread-function-from-tidyr-package-to-convert-the-data-from-long-to-wide-format">Using spread() function from tidyr package to convert the data from long to wide format.</a></li>
      </ul>
    </li>
    <li><a href="#sub-setting-or-filtering-a-data-frame">Sub setting or filtering a data frame</a></li>
    <li><a href="#inspecting-top-and-bottom-rows-of-a-data-frame">Inspecting top and bottom rows of a data frame</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="data-manipulation-tasks-with-example-code">Data Manipulation Tasks With Example Code</h1>
<p>As a data analyst, you will be working mostly with data frames. And thus, it becomes vital that you learn, understand, and practice data manipulation tasks. This chapter will focus on listing down some of the most common data manipulation tasks along with example code.</p>
<blockquote class="book-hint info">
  Before, we start and dig into how to accomplish tasks mentioned above. Let&rsquo;s see how to access the datasets which come along with the R packages.
</blockquote>

<p>You can get the list of all the datasets by using <code>data()</code> function and to get the list of datasets belonging to a particular package use argument <code>data(package = &quot;MASS&quot;)</code> function.</p>
<h1 id="structure-of-a-data-frame">Structure of a data frame</h1>
<p>With the structure of a data frame, we mean how to check the dimension of a data frame. The total number of observations present in a data frame and things like that. This information can be extracted by using <code>dim()</code>and <code>str()</code> functions. The <code>str()</code> function gives much more detailed information as compared to <code>dim()</code> function.</p>
<pre><code># Getting number of rows and columns - dimension
dim(iris)

# Getting more elaborate information
str(iris)
</code></pre><h2 id="getting-column-and-row-names">Getting column and row names</h2>
<p>To print the column and row names, you can use the <code>colnames()</code> and <code>rownames()</code> function. There exist another function called <code>names()</code> that can get the names of the columns. Both functions return a character vector.</p>
<pre><code># Printing columns names
colnames(iris)
# Printing columns names
names(iris)
# Getting more elaborate information
rownames(mtcars)
</code></pre><h1 id="converting-row-names-to-columns">Converting row names to columns</h1>
<p>The function <code>add_rownames()</code>  from <code>dplyr</code> can add row names as a column into the data frame. This function will add the new column at the beginning of the data frame.</p>
<pre><code>library(dplyr)
# Adding row names as a column in mtcars
mtcars &lt;- add_rownames(mtcars, &quot;carNames&quot;)
</code></pre><p>The above task can also be accomplished by using functions like <code>rownames()</code> and <code>cbind()</code> from base R package. So let us see how one can achieve the desired output using these functions.</p>
<pre><code># Resetting the data to the original form
data(mtcars)
# Extracting row names
names &lt;- rownames(mtcars)
#Setting the row names to NULL - deleting basically
rownames(mtcars) &lt;- NULL
# Combining the row names back to the mtcars dataset
mtcars &lt;- cbind(mtcars,names)
</code></pre><h1 id="accessing-columns-and-rows-in-a-data-frame">Accessing columns and rows in a data frame</h1>
<p>A row or a column of a data frame can be accessed using either the index or name. For example,</p>
<p><strong>Extract mileage data from mtcars dataset</strong></p>
<pre><code># Using index
mtcars[, 1] # mileage is the first columns

# Using column name
mtcars[, &quot;mpg&quot;]

# Using dollar notation(to call by variable name)
mtcars$mpg
</code></pre><p><strong>Extract two columns - mileage and cyl from mtcars dataset</strong></p>
<pre><code># Using index
mtcars[, c(1,2)] # mileage is the first columns

# Using column name
mtcars[, c(&quot;mpg&quot;, &quot;cyl&quot;)]
</code></pre><p><strong>Extract data at row level - Hornet 4 Drive from mtcars dataset</strong></p>
<pre><code># Using index
mtcars[4, ] # Hornet 4 Drive is the fourth observation
# Using index for calling multiple rows
mtcars[c(3,4), ] # Hornet 4 Drive is the fourth observation

# Using row name
mtcars[&quot;Hornet 4 Drive&quot;,]

# Using row nams for calling multiple observations
mtcars[c(&quot;Datsun 710&quot;,&quot;Hornet 4 Drive&quot;),]
</code></pre><h1 id="renaming-and-rearranging-columns-of-a-data-frame">Renaming and rearranging columns of a data frame</h1>
<p>One can rename the columns using <code>colnames()</code> function. The same task can be achieved through <code>rename()</code> function from <code>dplyr</code> package in R.</p>
<pre><code># Renaming all the columns
colnames(cars) &lt;- c(&quot;carSpeed&quot;, &quot;distanceCovered&quot;)
# Renaming only 2nd column
colnames(cars)[2] &lt;- &quot;distCovered&quot;

# Using rename() function from dplyr
require(dplyr)
iris = rename(iris, flowerSpecies = Species, SepalLength = Sepal.Length)
</code></pre><blockquote class="book-hint info">
  Columns of a data frame can be rearranged by using column names or by using column index, as shown in the code snippet.
</blockquote>

<pre><code>data(cars)
# Checking current column names
names(cars)
# Reordering by using column names
cars &lt;- cars[c(&quot;dist&quot;, &quot;speed&quot;)]

# Reordering by using column index
cars &lt;- cars[c(2, 1)]
</code></pre><h1 id="how-to-identify-missing-values">How to identify missing values</h1>
<p>You can look for missing values by column or by row. To check by column we can use <code>describe()</code> function from <code>Hmisc</code> R package or <code>summary()</code> function from stats R package. The <code>describe()</code> function returns a column called as missing, whereas <code>summary()</code> function indicates the presence of the missing values by <strong>NA</strong> count.</p>
<pre><code>library(Hmisc)
# using describe() function
describe(mtcars)
# Using summary() function
summary(mtcars)
</code></pre><p>Apart from these two functions you also use <code>is.na()</code> function along with <code>apply()</code> and <code>any()</code> function to identify if a variable contains missing value or not. If a variable contains a missing value it will return <strong>TRUE</strong> else it will return <strong>FALSE</strong>.</p>
<pre><code># Column wise missing value check
apply(mtcars, 2, function(x){any(is.na(x))})
# Row wise missing value check
apply(mtcars, 1, function(x){any(is.na(x))})
</code></pre><h1 id="how-to-filtering-missing-values">How to filtering missing values</h1>
<p>To filter missing values we can make use of <code>is.na()</code> function or we can also use a function named <code>complete.cases()</code>. Lets us see how to use these functions.</p>
<pre><code># Using is.na to get complete observations
CO2[!is.na(CO2), ]
# Using complete.cases to get complete rows
CO2[complete.cases(CO2), ]
</code></pre><h1 id="how-to-impute-missing-values">How to impute missing values</h1>
<p>There are many ways in which one can fill the missing values. However, in this section, we will learn how to <strong>replace missing values by mean</strong> and how to use a <strong>machine learning algorithm like KNN or Random Forest</strong> to impute the missing values.</p>
<pre><code># Filling missing values with Mean
iris$Sepal.Length[is.na(iris$Sepal.Length)] = mean(iris$Sepal.Length, na.rm=TRUE)
# alternative way is to use ifelse
iris = transform(iris, y = ifelse(is.na(Sepal.Length), mean(Sepal.Length, na.rm=TRUE), Sepal.Length))

# Using knn imputation to fill missing values
library(bnstruct)
knn.impute(iris, k = 3, cat.var = 1:ncol(iris),
          to.impute = 1:nrow(iris),
          using = 1:nrow(iris))

# Using random forest to fill missing value
set.seed(50)
iris &lt;- rfImpute(Species ~ ., iris.na)
</code></pre><h1 id="sorting-variables-in-a-data-frame">Sorting variables in a data frame</h1>
<p>You can sort a column in ascending or descending order. Also, one can use more than one column to sort the dataset. We will be demonstrating how to sort the data frame by using <code>order()</code> and <code>arrange()</code> functions. <strong>The arrange() function is from <code>dplyr</code> package in R.</strong></p>
<pre><code>data(mtcars)
# Sorting mtcars by mpg(ascen) variable - order function
mtcars[order(mtcars$mpg),]
# Sorting mtcars by mpg(desc) variable - order function
mtcars[order(mtcars$mpg, decreasing = TRUE),]
# we can use (-)ve sign
mtcars[order(-mtcars$mpg),]

# Sorting by more than two variables
mtcars[order(mtcars$mpg, mtcars$cyl),]

# Using arrange function from dplyr package
require(dplyr)
arrange(mtcars, mpg) # ascending order one variable
arrange(mtcars, mpg, cyl) # ascending order two variables
arrange(mtcars, desc(mpg)) # descending order one variable
</code></pre><h1 id="removing-duplicated-values-from-a-data-frame">Removing duplicated values from a data frame</h1>
<p>Duplicate values are mostly considered from a row&rsquo;s perspective, but one may require to identify duplicate columns. In this example, we will see how to remove duplicated rows as well as duplicated columns.</p>
<pre><code>data(CO2)
# Adding duplicated row
CO2 &lt;- rbind(CO2, CO2[2,])
nrow(CO2)
# Removing duplicated rows
CO2[!duplicated(CO2), ]
nrow(CO2)

# Adding duplicate columns for demonstration
data(CO2)# Resting the data
CO2 &lt;- cbind(CO2, CO2[,2])
colnames(CO2)[6] &lt;- &quot;Type&quot;
# Removing duplicated columns
CO2[, !duplicated(colnames(CO2))]


data(CO2) # Resting the data
CO2 &lt;- cbind(CO2, CO2[,2])
colnames(CO2)[6] &lt;- &quot;Type&quot; # naming the column
# Removing duplicated columns and keeping the last columns
CO2[, !duplicated(colnames(CO2), fromLast = TRUE)]
</code></pre><h1 id="renaming-levels-of-a-factor-variable-in-a-data-frame">Renaming levels of a factor variable in a data frame</h1>
<p>To rename levels of factor variable can be tricky but is pretty simple. First, you need to call the levels of a factor variable by using <code>levels()</code> function and then assign new names to the desired levels. Remember, the order of new variable names should be the same.</p>
<pre><code># Renaming Mississippi level to Miss
levels(CO2$)[2] &lt;- &quot;Miss&quot;
# Renaming all the levels
levels(CO2$) &lt;- c(&quot;Queb&quot;, &quot;Missi&quot;) # follow the order
</code></pre><h1 id="generating-frequency-tableone-way-two-way-etc">Generating frequency table(one-way, two-way etc)</h1>
<p>To generate a frequency table use <code>table()</code> or <code>CrossTable()</code> function from <code>gmodels</code> package in R. The output of a <code>CrossTable()</code> functions resembels the output of <strong>ctable in SAS</strong>.  The output also includes Row Totals, Column Totals, Table Total and chi-sqaure contribution information.</p>
<pre><code># Building frequency table - univariate
table(mtcars$cyl) # ingnors NA
table(mtcars$cyl, useNA = &quot;ifany&quot;) # gives freq of NA if present
table(mtcars$cyl, useNA = &quot;always&quot;) # always prints NA count in a table if NA is missing 0 count is considered.

# Building frequency table - Bivariate
table(mtcars$cyl, mtcars$am)
# Building frequency table - multivariate
table(mtcars$cyl, mtcars$am, mtcars$gear)

# Using crosstable function to generate contigency table
library(gmodels)
CrossTable(mtcars$cyl, mtcars$am)
</code></pre><h1 id="adding-and-deleting-columns-in-a-data-frame">Adding and deleting columns in a data frame</h1>
<p>The addition and deletion of the new column is a part of a regular job for a data analyst. Let us see how we can <strong>add a column called time</strong> to the cars dataset by using the distance over speed formula.</p>
<pre><code># Adding new column
cars$time &lt;- round(cars$dist/cars$speed, 1)

# Deleting a column
cars$time &lt;- NULL
</code></pre><h1 id="merging-combining-and-appending-data-frames">Merging, combining and appending data frames</h1>
<p>You can merge function to combine the two dataframe in R. This function is available in the base package. Using merge function, one can get the inner, outer, left, right, and cross joins.</p>
<pre><code># Inner Join
merge(x = data1, y = data2, by = &quot;common Variable&quot;)

# Outer join
merge(x = data1, y = data2, by = &quot;common Variable&quot;, all = TRUE)

# Left outer join
merge(x = data1, y = data2, by = &quot;common Variable&quot;, all.x = TRUE)

# Right outer
merge(x = data1, y = data2, by = &quot;common Variable&quot;, all.y = TRUE)

# Cross join
merge(x = data1, y = data2, by = NULL)
</code></pre><h1 id="summarizing-data">Summarizing data</h1>
<p>Many different packages in R provide a different set of functions with divergent statistics. Here is the list of functions that you can consume directly.</p>
<ul>
<li><code>summary()</code> function - available in basic R</li>
<li><code>describe()</code> function - there are two different function by same name. One is available in <code>psych</code> package and the other is available in <code>Hmisc</code> package</li>
<li><code>fivenum()</code> function - available in base R - <code>stats</code> package</li>
</ul>
<h1 id="summarizing-data-by-grouped-variable">Summarizing data by grouped variable</h1>
<p>It is always a good idea to look at the data over different slices. For example, you may want to look at the average mileage of a car by cylinder variable. Below is a list of functions that we will be using to achieve the task mentioned above.</p>
<ul>
<li>Using <code>aggregate()</code> function</li>
<li>Using <code>tapply()</code> function</li>
<li>Using <code>group_by()</code> and <code>summary()</code> function from <code>dplyr</code> package</li>
</ul>
<blockquote class="book-hint info">
  You can use these functions to aggregate data by multiple variables as well.
</blockquote>

<pre><code># Using aggregate function
aggregate(x = mtcars$mpg, by = list(mtcars$cyl), FUN = &quot;mean&quot;)

# Using aggregate() to group by more than one variable
aggregate(x = mtcars$mpg, by = list(mtcars$cyl, mtcars$gear), FUN = &quot;mean&quot;)

# Using tapply function
tapply(mtcars$mpg, mtcars$cyl, mean)

# Using functions from dplyr package
# Loading library
library(dplyr)
mtcars %&gt;%
  dplyr::group_by(cyl) %&gt;%
    dplyr::summarize(mean_mileage = mean(mpg))

# Using multiple variables to group
mtcars %&gt;%
  dplyr::group_by(cyl, gear) %&gt;%
    dplyr::summarize(mean_mileage = mean(mpg))
</code></pre><h1 id="transforming-data-between-long-and-wide-format">Transforming data between long and wide format</h1>
<p>While working on data in R, you will realize that a lot of functions expect you to pass data in the long-form. These tasks can be achieved using functions from <code>tidyr</code> package and <code>rehape2</code> package in R.</p>
<p>We will first create two data frames, one with a wide format and one with the long format containing the same information.</p>
<p><strong>Creating data frame with wide format</strong></p>
<pre><code>wide &lt;- read.table(header=TRUE, text='
 subject sex control cond1 cond2
       1   M     7.9  12.3  10.7
       2   F     6.3  10.6  11.1
       3   F     9.5  13.1  13.8
       4   M    11.5  13.4  12.9 ')
# Coneverting subject variable to factor variable
wide$subject &lt;- factor(wide$subject)
</code></pre><p><strong>Creating data frame with long format</strong></p>
<pre><code>long &lt;- read.table(header=TRUE, text='
 subject sex condition measurement
       1   M   control         7.9
       1   M     cond1        12.3
       1   M     cond2        10.7
       2   F   control         6.3
       2   F     cond1        10.6
       2   F     cond2        11.1
       3   F   control         9.5
       3   F     cond1        13.1
       3   F     cond2        13.8
       4   M   control        11.5
       4   M     cond1        13.4
       4   M     cond2        12.9 ')
# Coneverting subject variable to factor variable
long$subject  &lt;- factor(long$subject)
</code></pre><blockquote class="book-hint warning">
  <strong>Note</strong>
{tidyr} package is just a new interface for the reshape2 package.
</blockquote>

<h2 id="using-gather-function-from-tidyr-package-to-convert-the-data-from-wide-to-long-format">Using gather() function from tidyr package to convert the data from wide to long format.</h2>
<pre><code># loading package
library(tidyr)

wide_to_long &lt;- gather(wide, condition, measurement, control:cond2, factor_key=TRUE)
wide_to_long
</code></pre><h2 id="using-spread-function-from-tidyr-package-to-convert-the-data-from-long-to-wide-format">Using spread() function from tidyr package to convert the data from long to wide format.</h2>
<pre><code>long_to_wide &lt;- spread(long, condition, measurement)
long_to_wide
</code></pre><p>Functions which can be used from <code>reshape2</code> package in R are listed below:</p>
<ul>
<li>
<p><code>melt()</code> function - used for converting wide formate to long format</p>
</li>
<li>
<p><code>dcast()</code> function - used for converting long formate to wide format</p>
</li>
</ul>
<h1 id="sub-setting-or-filtering-a-data-frame">Sub setting or filtering a data frame</h1>
<p>Although the subset of the data (based upon a condition) can be done in many different ways in R. In this chapter, we will be exploring three different approaches or say functions. For example, say you want to take a subset of CO2 data by the Treatment variable. Say you wish to create a new data frame that has all the observations belonging to a nonchilled treatment category.</p>
<pre><code># Using square brackets
sub1 &lt;- CO2[CO2$Treatment == &quot;nonchilled&quot;, ]

# Using subset function
sub2 &lt;- subset(CO2, CO2$Treatment == &quot;nonchilled&quot;)

# Using filter function from dplyr package
library(dplyr)
sub3 &lt;- filter(CO2, Treatment == &quot;nonchilled&quot;)
</code></pre><p>You can use logical operators to use more than one condition spread across multiple variables. For example, get the subset of data where Treatment is nonchilled, and Type is Quebec.</p>
<pre><code># Using square brackets
sub1 &lt;- CO2[CO2$Treatment == &quot;nonchilled&quot; &amp; CO2$Type == &quot;Quebec&quot;, ]

# Using subset function
sub2 &lt;- subset(CO2, CO2$Treatment == &quot;nonchilled&quot; &amp; CO2$Type == &quot;Quebec&quot; )

# Using filter function from dplyr package
library(dplyr)
sub3 &lt;- filter(CO2, Treatment == &quot;nonchilled&quot;, CO2$Type == &quot;Quebec&quot;)
</code></pre><h1 id="inspecting-top-and-bottom-rows-of-a-data-frame">Inspecting top and bottom rows of a data frame</h1>
<p>You can use head() and tail() functions to inspect the top and bottom n observations. By default both these function print top 6 and bottom 6 observations. However, you can fetch data for more or less observations.</p>
<pre><code>head(mtcars) # default top 6 observations
head(mtcars, 10) # prints top 10 observations
tail(mtcars) # default bottom 6 observations
tail(mtcars, 10) # prints bottom 10 observations
</code></pre></article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">



  <div><a class="flex align-center" href="https://github.com/DataScience86/rstatisticsblog/tree/master/content/docs/commit/8d71588c1a4f671aa0d1b8126659af667a8085a8" title='Last modified by datasciencebeginner | May 2, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>May 2, 2020</span>
    </a>
  </div>



</div>

 
        
      </footer>

      
  
  <div class="book-comments">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "rstatisticsblog-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#data-manipulation-tasks-with-example-code">Data Manipulation Tasks With Example Code</a></li>
    <li><a href="#structure-of-a-data-frame">Structure of a data frame</a>
      <ul>
        <li><a href="#getting-column-and-row-names">Getting column and row names</a></li>
      </ul>
    </li>
    <li><a href="#converting-row-names-to-columns">Converting row names to columns</a></li>
    <li><a href="#accessing-columns-and-rows-in-a-data-frame">Accessing columns and rows in a data frame</a></li>
    <li><a href="#renaming-and-rearranging-columns-of-a-data-frame">Renaming and rearranging columns of a data frame</a></li>
    <li><a href="#how-to-identify-missing-values">How to identify missing values</a></li>
    <li><a href="#how-to-filtering-missing-values">How to filtering missing values</a></li>
    <li><a href="#how-to-impute-missing-values">How to impute missing values</a></li>
    <li><a href="#sorting-variables-in-a-data-frame">Sorting variables in a data frame</a></li>
    <li><a href="#removing-duplicated-values-from-a-data-frame">Removing duplicated values from a data frame</a></li>
    <li><a href="#renaming-levels-of-a-factor-variable-in-a-data-frame">Renaming levels of a factor variable in a data frame</a></li>
    <li><a href="#generating-frequency-tableone-way-two-way-etc">Generating frequency table(one-way, two-way etc)</a></li>
    <li><a href="#adding-and-deleting-columns-in-a-data-frame">Adding and deleting columns in a data frame</a></li>
    <li><a href="#merging-combining-and-appending-data-frames">Merging, combining and appending data frames</a></li>
    <li><a href="#summarizing-data">Summarizing data</a></li>
    <li><a href="#summarizing-data-by-grouped-variable">Summarizing data by grouped variable</a></li>
    <li><a href="#transforming-data-between-long-and-wide-format">Transforming data between long and wide format</a>
      <ul>
        <li><a href="#using-gather-function-from-tidyr-package-to-convert-the-data-from-wide-to-long-format">Using gather() function from tidyr package to convert the data from wide to long format.</a></li>
        <li><a href="#using-spread-function-from-tidyr-package-to-convert-the-data-from-long-to-wide-format">Using spread() function from tidyr package to convert the data from long to wide format.</a></li>
      </ul>
    </li>
    <li><a href="#sub-setting-or-filtering-a-data-frame">Sub setting or filtering a data frame</a></li>
    <li><a href="#inspecting-top-and-bottom-rows-of-a-data-frame">Inspecting top and bottom rows of a data frame</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












